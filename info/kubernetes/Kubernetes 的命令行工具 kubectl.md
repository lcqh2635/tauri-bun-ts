`kubectl` æ˜¯ **Kubernetes çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰**ï¼Œå®ƒæ˜¯ä½ ä¸ Kubernetes é›†ç¾¤è¿›è¡Œäº¤äº’çš„â€œé¥æ§å™¨â€ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥éƒ¨ç½²åº”ç”¨ã€æŸ¥çœ‹çŠ¶æ€ã€ç®¡ç†èµ„æºã€è°ƒè¯•é—®é¢˜ç­‰ã€‚

---

## ğŸŒŸ ä»€ä¹ˆæ˜¯ kubectlï¼Ÿ

- **å…¨ç§°**ï¼š`kube control`ï¼ˆå‘éŸ³ç±»ä¼¼ "kube C T L"ï¼‰
- **ä½œç”¨**ï¼šä½œä¸ºå®¢æˆ·ç«¯å·¥å…·ï¼Œå‘ Kubernetes é›†ç¾¤çš„ API Server å‘é€è¯·æ±‚ï¼Œå®ç°å¯¹é›†ç¾¤çš„æ§åˆ¶ã€‚
- **ç±»æ¯”ç†è§£**ï¼š
    - å°±åƒ `git` æ˜¯ä½ ä¸ Git ä»“åº“äº¤äº’çš„å·¥å…·ï¼Œ
    - `docker` æ˜¯ä½ ä¸ Docker å¼•æ“äº¤äº’çš„å·¥å…·ï¼Œ
    - `kubectl` å°±æ˜¯ä½ ä¸ Kubernetes é›†ç¾¤äº¤äº’çš„å·¥å…·ã€‚

---

## ğŸ§° kubectl èƒ½åšä»€ä¹ˆï¼Ÿï¼ˆå¸¸è§ç”¨é€”ï¼‰

| åŠŸèƒ½ | ç¤ºä¾‹å‘½ä»¤ |
|------|----------|
| åˆ›å»ºèµ„æº | `kubectl create deployment nginx --image=nginx` |
| æŸ¥çœ‹èµ„æº | `kubectl get pods`, `kubectl get nodes` |
| æè¿°èµ„æºè¯¦æƒ… | `kubectl describe pod my-pod` |
| åˆ é™¤èµ„æº | `kubectl delete deployment nginx` |
| è¿›å…¥å®¹å™¨ | `kubectl exec -it my-pod -- sh` |
| æŸ¥çœ‹æ—¥å¿— | `kubectl logs my-pod` |
| åº”ç”¨é…ç½®æ–‡ä»¶ | `kubectl apply -f deployment.yaml` |
| æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ | `kubectl get all --all-namespaces` |
| ç«¯å£è½¬å‘ | `kubectl port-forward pod/my-pod 8080:80` |

---

## ğŸ—ï¸ å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

```
+------------+     HTTP/HTTPS     +------------------+
|  kubectl   | -----------------> | Kubernetes API   |
| (ä½ çš„ç”µè„‘) |      (REST API)    | Server (é›†ç¾¤æ ¸å¿ƒ) |
+------------+                    +------------------+
```

1. ä½ åœ¨ç»ˆç«¯è¾“å…¥ `kubectl get pods`
2. `kubectl` å‘é›†ç¾¤çš„ API Server å‘é€ä¸€ä¸ª HTTPS è¯·æ±‚
3. API Server éªŒè¯æƒé™å¹¶è¿”å›å½“å‰æ‰€æœ‰ Pod çš„ä¿¡æ¯
4. `kubectl` æŠŠç»“æœæ ¼å¼åŒ–åæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Š

> âœ… æ‰€æœ‰æ“ä½œéƒ½é€šè¿‡æ ‡å‡† API å®Œæˆï¼Œå®‰å…¨ä¸”å¯å®¡è®¡ã€‚

---

## ğŸ“ å¸¸ç”¨èµ„æºç±»å‹ï¼ˆä½ ç”¨ kubectl ç®¡ç†çš„å¯¹è±¡ï¼‰

| èµ„æº | è¯´æ˜ |
|------|------|
| `pod` | æœ€å°éƒ¨ç½²å•å…ƒï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ |
| `deployment` | ç®¡ç† Pod çš„å‰¯æœ¬å’Œæ›´æ–°ï¼ˆæ¨èä½¿ç”¨ï¼‰ |
| `service` | ç»™ Pod æä¾›ç¨³å®šçš„ç½‘ç»œè®¿é—®å…¥å£ |
| `ingress` | å¤–éƒ¨è®¿é—®æœåŠ¡çš„è·¯ç”±è§„åˆ™ï¼ˆå¦‚åŸŸåï¼‰ |
| `configmap` / `secret` | å­˜æ”¾é…ç½®å’Œæ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ï¼‰ |
| `namespace` | å¯¹èµ„æºè¿›è¡Œé€»è¾‘åˆ†ç»„ï¼ˆç±»ä¼¼æ–‡ä»¶å¤¹ï¼‰ |
| `node` | æŸ¥çœ‹å·¥ä½œèŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨/æœºå™¨ï¼‰çŠ¶æ€ |

---

## ğŸš€ å®é™…ä¾‹å­ï¼ˆå¿«é€Ÿä½“éªŒï¼‰

å‡è®¾ä½ å·²ç»å®‰è£…äº† K3s æˆ– Kubernetesï¼š

```bash
# 1. æŸ¥çœ‹èŠ‚ç‚¹
kubectl get nodes

# è¾“å‡ºç¤ºä¾‹ï¼š
# NAME         STATUS   ROLES                  AGE   VERSION
# my-laptop    Ready    control-plane,master   10m   v1.28.2+k3s1

# 2. å¯åŠ¨ä¸€ä¸ª Nginx åº”ç”¨
kubectl create deployment nginx --image=nginx

# 3. æŸ¥çœ‹ Pod æ˜¯å¦è¿è¡Œ
kubectl get pods

# 4. æš´éœ²æœåŠ¡ï¼ˆç«¯å£æ˜ å°„ï¼‰
kubectl expose deployment nginx --port=80 --type=NodePort

# 5. æŸ¥çœ‹æœåŠ¡
kubectl get svc

# 6. è¿›å…¥å®¹å™¨å†…éƒ¨
kubectl exec -it deploy/nginx -- sh

# 7. æŸ¥çœ‹æ—¥å¿—
kubectl logs deploy/nginx

# 8. åˆ é™¤åº”ç”¨
kubectl delete deployment nginx
```

---

## ğŸ” é…ç½®æ–‡ä»¶ï¼š~/.kube/config

`kubectl` éœ€è¦çŸ¥é“ï¼š
- é›†ç¾¤åœ°å€ï¼ˆAPI Serverï¼‰
- ç”¨æˆ·è®¤è¯ä¿¡æ¯ï¼ˆè¯ä¹¦æˆ– tokenï¼‰
- ä½¿ç”¨å“ªä¸ªä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰

è¿™äº›ä¿¡æ¯éƒ½ä¿å­˜åœ¨ `~/.kube/config` æ–‡ä»¶ä¸­ã€‚  
å½“ä½ å®‰è£… K3s æˆ– Minikube æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ã€‚

---

## ğŸ§© å°è´´å£«

- **åˆ«åå»ºè®®**ï¼šå¯ä»¥è®¾ç½®åˆ«åç®€åŒ–è¾“å…¥ï¼š
  ```bash
  alias k=kubectl
  ```
  ç„¶åå°±å¯ä»¥ç”¨ `k get pods` ä»£æ›¿ `kubectl get pods`

- **è‡ªåŠ¨è¡¥å…¨**ï¼šå¯ç”¨ Tab è¡¥å…¨ï¼ˆæé«˜æ•ˆç‡ï¼‰ï¼š
  ```bash
  echo "source <(kubectl completion bash)" >> ~/.bashrc
  source ~/.bashrc
  ```

- **æŸ¥çœ‹å¸®åŠ©**ï¼š
  ```bash
  kubectl --help
  kubectl get --help
  ```

---

## âœ… æ€»ç»“

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| `kubectl` æ˜¯ä»€ä¹ˆ | Kubernetes çš„å‘½ä»¤è¡Œæ§åˆ¶å·¥å…· |
| æ ¸å¿ƒä½œç”¨ | åˆ›å»ºã€æŸ¥çœ‹ã€æ›´æ–°ã€åˆ é™¤é›†ç¾¤ä¸­çš„èµ„æº |
| ç±»æ¯” | ç›¸å½“äº `git` ä¹‹äº Gitï¼Œ`docker` ä¹‹äº Docker |
| å¿…å¤‡æ€§ | ä½¿ç”¨ Kubernetes å‡ ä¹ç¦»ä¸å¼€å®ƒ |
| å­¦ä¹ å»ºè®® | ä» `get`ã€`describe`ã€`logs`ã€`exec` å¼€å§‹ç»ƒä¹  |

---

å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥å¸¦ä½ ä¸€æ­¥æ­¥ç”¨ `kubectl` éƒ¨ç½²ä¸€ä¸ªç®€å•çš„ç½‘é¡µåº”ç”¨ï¼ˆæ¯”å¦‚ Nginx æˆ–ä¸€ä¸ª Python æœåŠ¡ï¼‰ï¼Œè®©ä½ ç›´è§‚æ„Ÿå—å®ƒçš„å¨åŠ› ğŸ˜Š