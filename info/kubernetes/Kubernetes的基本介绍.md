Kubernetes（常缩写为 **K8s**）是一个开源的容器编排平台，用于自动化部署、扩展和管理容器化应用程序。它最初由 Google 开发，现在由云原生计算基金会（CNCF）维护，是当前最主流的容器编排工具。

---

### 一、Kubernetes 是什么？

**Kubernetes** 是一个用于管理容器化应用的分布式系统，能够跨多台主机（物理机或虚拟机）自动部署、调度、伸缩和监控容器应用。它抽象了底层基础设施，使开发者和运维人员可以更高效地管理复杂的应用系统。

简单来说，Kubernetes 就像是一个“操作系统”级别的容器管理平台，负责协调和控制成百上千个运行在容器中的微服务。

---

### 二、Kubernetes 有什么作用？

Kubernetes 的主要作用包括：

1. **自动化部署与回滚**  
   自动部署应用，并在出现问题时回滚到之前的稳定版本。

2. **服务发现与负载均衡**  
   自动为容器分配 IP 和 DNS 名称，并通过负载均衡将流量分发到多个容器实例。

3. **自动伸缩（Auto-scaling）**  
   根据 CPU 使用率或自定义指标自动增加或减少容器副本数量。

4. **自我修复（Self-healing）**  
   当容器崩溃或节点故障时，自动重启、替换或重新调度容器。

5. **配置与密钥管理**  
   提供 ConfigMap 和 Secret 来管理配置信息和敏感数据（如密码、密钥），无需硬编码到镜像中。

6. **存储编排**  
   挂载本地存储、网络存储（如 NFS、AWS EBS、GCE PD）或云存储到容器中。

7. **批量执行与定时任务**  
   支持运行一次性任务（Job）和定时任务（CronJob）。

8. **多环境一致性**  
   可在开发、测试、生产等不同环境中保持一致的部署方式。

---

### 三、Kubernetes 的使用场景

1. **微服务架构管理**  
   将大型单体应用拆分为多个微服务，K8s 负责协调这些服务的部署、通信和扩展。

2. **持续集成/持续部署（CI/CD）**  
   与 Jenkins、GitLab CI、ArgoCD 等工具集成，实现自动化发布流程。

3. **混合云与多云部署**  
   支持在本地数据中心、公有云（AWS、Azure、GCP）或混合环境中统一管理应用。

4. **高可用与弹性伸缩系统**  
   适用于电商、社交平台等需要应对流量高峰的应用。

5. **大数据与AI平台**  
   运行 Spark、TensorFlow 等分布式计算框架的容器化版本。

6. **边缘计算**  
   通过 K3s（轻量级 K8s）在边缘设备上部署和管理应用。

---

### 四、Kubernetes 的核心内容（核心组件与概念）

#### 1. 核心架构组件

| 组件 | 说明 |
|------|------|
| **Master 节点（控制平面）** | 负责集群的管理与控制 |
| - API Server | 提供 REST 接口，是所有操作的入口 |
| - etcd | 分布式键值存储，保存集群状态 |
| - Controller Manager | 管理控制器（如副本控制器、节点控制器） |
| - Scheduler | 负责将 Pod 调度到合适的节点 |
| **Worker 节点（工作节点）** | 运行实际应用容器 |
| - Kubelet | 与 Master 通信，管理本节点上的 Pod |
| - Kube-proxy | 实现服务发现和网络代理 |
| - Container Runtime | 如 Docker、containerd，负责运行容器 |

#### 2. 核心对象（资源对象）

| 对象 | 说明 |
|------|------|
| **Pod** | 最小部署单元，包含一个或多个共享网络和存储的容器 |
| **Deployment** | 定义 Pod 的期望状态，支持滚动更新和回滚 |
| **Service** | 定义一组 Pod 的访问策略，提供稳定的 IP 和 DNS |
| **ConfigMap** | 存放非敏感配置数据 |
| **Secret** | 存放敏感信息（如密码、token） |
| **Namespace** | 用于资源隔离，实现多租户管理 |
| **StatefulSet** | 用于有状态应用（如数据库） |
| **DaemonSet** | 确保每个节点运行一个 Pod（如日志采集） |
| **Job / CronJob** | 执行一次性或定时任务 |
| **Ingress** | 管理外部访问（通常通过 HTTP/HTTPS） |

#### 3. 网络模型

- 每个 Pod 有唯一的 IP。
- 所有 Pod 可以直接通信（无需 NAT）。
- 支持 CNI（容器网络接口）插件，如 Calico、Flannel、Cilium。

#### 4. 存储

- 支持持久卷（PersistentVolume, PV）和持久卷声明（PersistentVolumeClaim, PVC）。
- 可对接多种存储系统（NFS、云磁盘、GlusterFS 等）。

#### 5. 扩展机制

- **CRD（Custom Resource Definition）**：自定义资源类型。
- **Operator 模式**：用代码管理复杂应用（如 etcd、Prometheus）。

---

### 五、总结

| 项目 | 内容 |
|------|------|
| **本质** | 容器编排系统 |
| **核心功能** | 部署、调度、伸缩、自愈、服务发现 |
| **适用场景** | 微服务、CI/CD、多云、高可用系统 |
| **核心优势** | 自动化、可扩展、高可用、生态丰富 |
| **学习曲线** | 较陡，但社区和工具支持强大 |

---

### 补充：常见发行版与工具

- **Minikube / Kind**：本地开发测试 K8s 集群
- **Kubeadm**：快速搭建生产级集群
- **Helm**：K8s 的“包管理器”，简化应用部署
- **Kustomize**：无模板的配置管理工具
- **Rancher / OpenShift**：企业级 K8s 管理平台

---

如果你是开发者或运维人员，掌握 Kubernetes 已成为云原生时代的必备技能。它不仅是技术工具，更是现代应用架构的核心支撑。